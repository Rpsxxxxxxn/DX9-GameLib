//********************************************************************************
//
// FadeAni.hpp
//
// フェードアニメーションクラス
//
// Date: 2019/07/30 更新
//
//********************************************************************************

#pragma once

//================================================================================
// インクルード
//================================================================================
#include "../../GameManager/GameManager.h"

//================================================================================
// 列挙体定義
//================================================================================
enum FadeMode
{
	F_NONE,
	F_IN,
	F_OUT,
	F_HALF_IN,
	F_HALF_OUT,
};

//================================================================================
// クラス定義
//================================================================================
class CFadeAni
{
public:

	//--------------------------------------------------------------------------------
	// コンストラクタ
	//--------------------------------------------------------------------------------
	CFadeAni();

	//--------------------------------------------------------------------------------
	// デストラクタ
	//--------------------------------------------------------------------------------
	~CFadeAni();

	//--------------------------------------------------------------------------------
	// ファイル読み込み
	// 引　数：CSystem*	システムクラスのポインタ
	//--------------------------------------------------------------------------------
	void LoadFile(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// 初期化
	// 引　数：CSystem*	システムクラスのポインタ
	//--------------------------------------------------------------------------------
	void Initialize(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// 描画
	// 引　数：CSystem*	システムクラスのポインタ
	//--------------------------------------------------------------------------------
	void Draw(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// フェードの速度を設定
	// 引　数：const DWORD	スピード
	//--------------------------------------------------------------------------------
	void SetFadeSpeed(const DWORD dwSpeed);

	//--------------------------------------------------------------------------------
	// フェードの仕方設定
	// 引　数：Fade	フェードモード
	//--------------------------------------------------------------------------------
	void SetFadeMode(FadeMode mode);

	//--------------------------------------------------------------------------------
	// フェードが終了したことを知らせる
	// 戻り値：const bool フェード終了
	//--------------------------------------------------------------------------------
	bool IsFadeEnd() const;

private:

	//--------------------------------------------------------------------------------
	// フェード開始
	// 備　考：だんだん暗くなる
	//--------------------------------------------------------------------------------
	void FadeInStart(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// フェード開始
	// 備　考：だんだん明るくなる
	//--------------------------------------------------------------------------------
	void FadeOutStart(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// フェード開始
	// 備　考：だんだん暗くなる(半分)
	//--------------------------------------------------------------------------------
	void HalfFadeInStart(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// フェード開始
	// 備　考：だんだん明るくなる(半分)
	//--------------------------------------------------------------------------------
	void HalfFadeOutStart(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// サウンド
	// 引　数：CSystem*	システムクラスのポインタ
	//--------------------------------------------------------------------------------
	void SoundManager(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// 更新
	// 引　数：CSystem*	システムクラスのポインタ
	//--------------------------------------------------------------------------------
	void Update(CSystem* pSystem);

	FadeMode m_fadeMode;
	RECT m_rSour;
	RECT m_rDest;
	DWORD m_dwAlpha;
	DWORD m_dwSpeed;
	float m_fadeVolume;
	float m_soundVolume;
	bool m_isFadeEnd;
};