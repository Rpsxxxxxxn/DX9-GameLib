//********************************************************************************
//
// CDemoRender.hpp
//
// デモ用モデルレンダリング
//
// Date: 2019/07/30 更新
//
//********************************************************************************

#pragma once

//================================================================================
// インクルード
//================================================================================
#include "../../GameManager/GameManager.h"

//================================================================================
// クラス定義
//================================================================================
class CDemoRender
{
public:

	//--------------------------------------------------------------------------------
	// コンストラクタ
	//--------------------------------------------------------------------------------
	CDemoRender();

	//--------------------------------------------------------------------------------
	// デストラクタ
	//--------------------------------------------------------------------------------
	~CDemoRender();

	//--------------------------------------------------------------------------------
	// ファイル読み込み
	// 引　数：CSystem*	システムクラスのポインタ
	//--------------------------------------------------------------------------------
	void LoadFile(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// 初期化
	// 引　数：CSystem*	システムクラスのポインタ
	//--------------------------------------------------------------------------------
	void Initialize(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// 更新
	// 引　数：CSystem*	システムクラスのポインタ
	//--------------------------------------------------------------------------------
	void Update(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// 描画
	// 引　数：CSystem*	システムクラスのポインタ
	//--------------------------------------------------------------------------------
	void ZDraw(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// 描画
	// 引　数：CSystem*	システムクラスのポインタ
	//--------------------------------------------------------------------------------
	void Draw(CSystem* pSystem);

	//--------------------------------------------------------------------------------
	// カメラクラスのポインタ取得
	// 戻り値：const CCamera*	カメラクラスのポインタ
	//--------------------------------------------------------------------------------
	CCamera* GetCamera();

	//--------------------------------------------------------------------------------
	// タイトルのステージを変更します
	//--------------------------------------------------------------------------------
	void ChangeStage(CSystem* pSystem);
private:

	void UpdateMeshAlpha();

	//--------------------------------------------------------------------------------
	// 世界行列の設定
	//--------------------------------------------------------------------------------
	void SetWorldTransform();

	//--------------------------------------------------------------------------------
	// カメラの距離設定
	//--------------------------------------------------------------------------------
	void SetCameraDist();

	CCamera* m_pCamera;

	CXFileModel* m_pPlayer;
	CXFileModel* m_pField;
	CXFileModel* m_pSky;
	CIntervalTimer m_timer;

	Vector3 m_vecLockAt;
	Vector3 m_vecAngle;

	float m_cameraXDist;
	float m_cameraZDist;

	float m_baseAngle;
	float m_demoAngle;
	float m_sinAngle;

	float m_meshAlpha;
	bool m_isChangeMesh;
	bool m_isChangeAlpha;
};