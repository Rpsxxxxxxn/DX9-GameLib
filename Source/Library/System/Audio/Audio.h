//*************************************************************
//
// Audio.hpp
//
// オーディオ再生用クラス
//
// Date: 2019/07/30 更新
//
//*************************************************************

#pragma once

//=============================================================
// インクルード
//=============================================================
#include "../../Common.h"
#include "Bgm/Bgm.h"
#include "Se/Se.h"

//=============================================================
// クラス定義
//=============================================================
class CAudio
{
public:

	//-------------------------------------------------------------
	// シングルトン生成
	//-------------------------------------------------------------
	static CAudio* Create();

	//-------------------------------------------------------------
	// コンストラクタ
	//-------------------------------------------------------------
	CAudio();

	//-------------------------------------------------------------
	// デストラクタ
	//-------------------------------------------------------------
	~CAudio();

	//-------------------------------------------------------------
	// Bgmの追加
	// 引　数：string	文字
	// 　　　：CBgm*	Bgmクラスのポインタ
	//-------------------------------------------------------------
	void AddBgm(const int index, string strFileName);

	//-------------------------------------------------------------
	// Seの追加
	// 引　数：string	文字
	// 　　　：CSe*		Seクラスのポインタ
	//-------------------------------------------------------------
	void AddSe(const int index, string strFileName);

	//-------------------------------------------------------------
	// 初期化
	//-------------------------------------------------------------
	void Initialize();

	//-------------------------------------------------------------
	// 更新
	//-------------------------------------------------------------
	void Update();

	//-------------------------------------------------------------
	// Bgm再生
	// 引　数：const int	追加したBgm名
	//-------------------------------------------------------------
	void PlayBgm(const int index);

	//-------------------------------------------------------------
	// Bgm停止
	// 引　数：const int	追加したBgm名
	//-------------------------------------------------------------
	void StopBgm(const int index);

	//-------------------------------------------------------------
	// Se再生
	// 引　数：const int	追加したSe名
	//-------------------------------------------------------------
	void PlaySe(const int index);

	//-------------------------------------------------------------
	// 巻き戻し
	// 引　数：const int	追加したBgm名
	//-------------------------------------------------------------
	void RewindBgm(const int index);

	//-------------------------------------------------------------
	// 追加したBgmの削除
	// 引　数：const int	追加したBgm名
	//-------------------------------------------------------------
	void EraseBgm(const int index);

	//-------------------------------------------------------------
	// 追加したSeの削除
	// 引　数：const int	追加したSe名
	//-------------------------------------------------------------
	void EraseSe(const int index);

	//-------------------------------------------------------------
	// 全ての音声データを削除
	//-------------------------------------------------------------
	void Release();

	//-------------------------------------------------------------
	// ボリュームの設定
	// 引　数：float	ボリューム
	//-------------------------------------------------------------
	void SetVolume(float volume);

	//-------------------------------------------------------------
	// オーディオの取得
	// 戻り値：IXAudio2	オーディオクラスのポインタ
	//-------------------------------------------------------------
	IXAudio2* GetXAudio();

private:

	IXAudio2* m_pXAudio2;
	IXAudio2MasteringVoice* m_pXAudioMaster;

	map<int, CBgm*> m_mapBgm;
	map<int, CSe*> m_mapSe;

	//コピー防止
	CAudio& operator=(const CAudio&);
	CAudio(const CAudio&);
};